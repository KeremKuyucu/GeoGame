import 'package:GeoGame/util.dart';
import 'package:latlong2/latlong.dart';
import 'package:flutter_map/flutter_map.dart';

class Denizekosistem extends StatefulWidget {
  @override
  _DenizState createState() => _DenizState();
}

class _DenizState extends State<Denizekosistem> {
  List<LatLng> _points = [];

  void initState() {
    super.initState();
    _initializeGame();
  }
  Future<void> _initializeGame() async {
    await readFromFile((update) => setState(update));
    denizoyunkurallari();
  }
  Future<void> denizoyunkurallari() async {
    return showDialog<void>(
      context: context,
      barrierDismissible: false, // kullanıcı mutlaka düğmeye basmalı
      builder: (BuildContext context) {
        return AlertDialog(
          title: Text(Yazi.get('kurallar')),
          content: SingleChildScrollView(
            child: ListBody(
              children: <Widget>[
                Text(Yazi.get('denizkural1')),
                Text(Yazi.get('denizkural2')),
                Text(Yazi.get('denizkural3')),
              ],
            ),
          ),
          actions: <Widget>[
            TextButton(
              child: Text(Yazi.get('tamam')),
              onPressed: () {
                Navigator.of(context).pop();
              },
            ),
          ],
        );
      },
    );
  }

  final Map<String, double> effects = {
    'nitrate': 0.35, // %35
    'iron': 0.2,     // %20
    'ph': -0.5,      // %50 azalma etkisi
    'co2': -0.45,    // %45 azalma etkisi
    'salinity': -0.15, // %15 azalma etkisi
    'temperature': 0.15, // %15
  };

  double planktonDensity = 60.0;
  double atmosphericCO2 = 400.0;
  double nitrate = 30.0, iron = 15.0, ph = 7.5, co2 = 400.0, salinity = 35.0, temperature = 15.0;

  void updatePlanktonDensity() {
    setState(() {
      double effectSum = 1.0;
      effectSum += effects['nitrate']! * (nitrate / 100);
      effectSum += effects['iron']! * (iron / 100);
      effectSum += effects['ph']! * ((7.5 - ph) / 7.5);
      effectSum += effects['co2']! * ((400.0 - co2) / 400.0);
      effectSum += effects['salinity']! * ((35.0 - salinity) / 35.0);
      effectSum += effects['temperature']! * ((15.0 - temperature) / 15.0);
      planktonDensity = (60.0 * effectSum).clamp(0, 100);
      atmosphericCO2 = (400.0 * (1 - planktonDensity / 100 * 0.4)).clamp(0, 400);
      planktonDensity = (planktonDensity > 50) ? (planktonDensity * 0.95) : planktonDensity;
    });
  }

  Color getDensityColor(double density) {
    if (density >= 90) {
      return Color(0xFF004D40); // Çok sağlıklı - Koyu yeşil
    } else if (density >= 75) {
      return Color(0xFF00796B); // Sağlıklı - Orta yeşil
    } else if (density >= 60) {
      return Color(0xFF009688); // Orta seviye - Turkuaz
    } else if (density >= 45) {
      return Color(0xFF4CAF50); // Hafif azalma - Açık yeşil
    } else if (density >= 30) {
      return Color(0xFF8BC34A); // Düşük - Sarımsı yeşil
    } else if (density >= 15) {
      return Color(0xFFFFEB3B); // Tehlikeli - Sarı
    } else if (density >= 5) {
      return Color(0xFFFF9800); // Kritik - Turuncu
    } else {
      return Color(0xFFF44336); // Çok düşük - Kırmızı
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Deniz Ekosistemi'),
        centerTitle: true,
        leading: Builder(
          builder: (context) => IconButton(
            icon: Icon(Icons.menu),
            onPressed: () {
              Scaffold.of(context).openDrawer();
            },
          ),
        ),
        actions: [
          IconButton(
            icon: Icon(Icons.home),
            onPressed: () {
              Navigator.pop(context);
            },
          ),
        ],
      ),
      drawer: DrawerWidget(),
      body: Stack(
        children: [
          FlutterMap(
            options: MapOptions(
              initialCenter: LatLng(0.0, 0.0),
              minZoom: 3,
              maxZoom: 7,
              initialZoom: 3.0,
              initialRotation: 0,
              onTap: (tapPosition, point) {
                setState(() {
                  _points.add(point); // Tıklanan noktayı listeye ekle
                  print("Tıklanan Nokta: ${point.latitude}, ${point.longitude}");
                  postMessage('LatLng(${point.latitude},${point.longitude}),');
                  postMessage2('LatLng(${point.latitude},${point.longitude}),');
                });
              },
            ),
            children: [
              TileLayer(
                urlTemplate: "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
              ),
              PolylineLayer(
                polylines: [
                  Polyline(
                    points: _points, // Tüm tıklanan noktalar
                    strokeWidth: 4.0,
                    color: Colors.red,  // Çizgi rengi
                  ),
                ],
              ),
              // Karadeniz
              PolygonLayer(
                polygons: [
                  Polygon(
                    points: [
                      LatLng(41.287579432832445,31.128004985863257),
                      LatLng(41.29583411654569,30.853346782738257),
                      LatLng(41.35358765411802,30.545729595238257),
                      LatLng(41.419529009503435,30.369948345238257),
                      LatLng(41.436003898257205,30.150221782738253),
                      LatLng(41.328842405923254,29.941481548363257),
                      LatLng(41.386566691277004,29.743727642113257),
                      LatLng(41.444239774912134,29.260329204613257),
                      LatLng(41.50186164386148,28.897780376488257),
                      LatLng(41.62516456071736,28.447340923363253),
                      LatLng(41.81377189090293,28.381422954613257),
                      LatLng(42.050791804900584,28.282546001488257),
                      LatLng(42.27880254728676,28.117751079613257),
                      LatLng(42.63544401263303,28.150710063988253),
                      LatLng(42.86939217789554,28.183669048363257),
                      LatLng(43.07838780007927,28.205641704613257),
                      LatLng(43.414495244458635,28.853835063988257),
                      LatLng(43.62958475265378,28.886794048363257),
                      LatLng(43.87559352732126,28.875807720238257),
                      LatLng(44.0574625926341,28.963698345238257),
                      LatLng(44.46659184862009,29.161452251488257),
                      LatLng(44.60755009663485,29.502028423363257),
                      LatLng(44.70914105718287,29.809645610863257),
                      LatLng(44.98177044168335,29.974440532738257),
                      LatLng(45.12147741827315,29.996413188988253),
                      LatLng(45.08270415696078,30.128249126488257),
                      LatLng(45.07494634481213,30.260085063988257),
                      LatLng(45.13697934974967,30.391921001488257),
                      LatLng(45.45384049542273,30.040358501488257),
                      LatLng(45.7459358808672,30.424879985863257),
                      LatLng(46.36348624492407,31.073073345238253),
                      LatLng(46.393803649339944,31.248854595238257),
                      LatLng(46.1964395956275,31.292799907738257),
                      LatLng(46.0288835945847,31.688307720238253),
                      LatLng(45.891413382902584,32.62214561086326),
                      LatLng(45.7152606046841,32.51228232961326),
                      LatLng(45.553938989514776,32.21565147023826),
                      LatLng(45.26857566249814,32.23762412648826),
                      LatLng(45.152477068070375,32.55622764211326),
                      LatLng(45.01284592886652,33.09455772023826),
                      LatLng(44.92734778704808,33.30329795461326),
                      LatLng(44.63882781173963,33.12751670461326),
                      LatLng(44.43522145527118,33.18244834523826),
                      LatLng(44.27025046150715,33.49006553273826),
                      LatLng(44.215156937096296,33.97346397023825),
                      LatLng(44.28598199196081,34.35798545461326),
                      LatLng(44.44306563326708,34.59968467336326),
                      LatLng(44.584080751670434,34.70954795461326),
                      LatLng(44.60755009663485,35.12702842336326),
                      LatLng(44.76377015528861,35.53352256398826),
                      LatLng(44.84951160737578,35.68733115773826),
                      LatLng(44.86508726964381,36.37946982961326),
                      LatLng(44.93512561189357,36.59919639211326),
                      LatLng(45.65385950919014,36.11579795461326),
                      LatLng(45.623133689016264,35.78620811086326),
                      LatLng(45.484658988620986,35.55549522023826),
                      LatLng(45.72293100317118,35.35774131398825),
                      LatLng(45.89905956512089,35.19294639211326),
                      LatLng(46.14318157835961,35.41267295461326),
                      LatLng(46.40895603916683,35.85212607961326),
                      LatLng(46.40138037027415,36.29157920461326),
                      LatLng(46.53002367523211,36.53327842336326),
                      LatLng(46.52246483709001,36.91779990773826),
                      LatLng(46.70358668678761,37.12654014211326),
                      LatLng(46.69605203613803,37.41218467336326),
                      LatLng(46.582906092688376,37.50007529836326),
                      LatLng(46.371067174157545,37.62092490773826),
                      LatLng(46.28002658134356,37.76374717336326),
                      LatLng(46.24964604616509,37.84065147023825),
                      LatLng(45.76126720126644,37.44514365773826),
                      LatLng(45.661538331651485,37.34626670461326),
                      LatLng(45.57701336708266,37.32429404836326),
                      LatLng(44.08903515125686,38.59870811086326),
                      LatLng(43.84390728646882,39.03816123586325),
                      LatLng(43.5420482619345,39.37873740773825),
                      LatLng(43.3106601717459,39.70832725148825),
                      LatLng(43.166595180979755,39.95002647023826),
                      LatLng(43.022189620060786,40.19172568898826),
                      LatLng(42.74042653310785,40.91682334523825),
                      LatLng(42.93377416867895,40.51032920461326),
                      LatLng(42.57075120522373,41.18049522023826),
                      LatLng(41.89560238146886,41.52107139211325),
                      LatLng(41.58408973247644,41.268385845238264),
                      LatLng(41.37832349929404,40.75202842336326),
                      LatLng(41.15536247251627,40.16975303273826),
                      LatLng(41.28757943283466,39.55451865773826),
                      LatLng(41.24629034801544,38.76350303273825),
                      LatLng(41.13054203832308,38.17024131398825),
                      LatLng(41.33709186670629,37.78571982961326),
                      LatLng(41.31234035040979,37.36823936086326),
                      LatLng(41.51008915789114,36.39045615773826),
                      LatLng(41.77281738881532,36.29157920461326),
                      LatLng(41.936478361701106,35.88508506398826),
                      LatLng(41.84651665050486,35.63239951711326),
                      LatLng(41.8547002231726,35.48957725148826),
                      LatLng(41.90324841567105,35.45522909738341),
                      LatLng(42.078808289487675,35.46621542550841),
                      LatLng(42.16437081633282,35.34536581613341),
                      LatLng(42.253883805543694,35.2245162067584),
                      LatLng(42.29452959160809,34.96633749582091),
                      LatLng(42.23355108292509,34.73013144113341),
                      LatLng(42.14808210035128,34.23025351144591),
                      LatLng(42.15622698239994,34.66970663644591),
                      LatLng(42.15622698239994,33.91164999582091),
                      LatLng(42.17658460195035,33.56558065988341),
                      LatLng(42.005377032418906,32.37905722238341),
                      LatLng(41.86644205676114,32.0000289020709),
                      LatLng(41.75999348919933,31.91213827707091),
                      LatLng(41.31234035040979,31.128004985863257)

                    ],
                    color: getDensityColor(planktonDensity),
                    borderColor: getDensityColor(planktonDensity),
                    borderStrokeWidth: 2,
                  ),
                ],
              ),
              // Marmara Denizi
              PolygonLayer(
                polygons: [
                  Polygon(
                    points: [
                      LatLng(40.72499888772332,29.306824630968094),
                      LatLng(40.77502264194898,29.31459313808561),
                      LatLng(40.78678746762189,29.254387207924772),
                      LatLng(40.79413942546487,29.219428925895897),
                      LatLng(40.826478368774396,29.19418127776393),
                      LatLng(40.822069440969116,29.122322586926792),
                      LatLng(40.83823407662347,29.064058783545352),
                      LatLng(40.87055152508375,29.02327412117833),
                      LatLng(40.91166002078408,29.00191072660512),
                      LatLng(40.957143202589705,28.98637371237006),
                      LatLng(40.94834245002384,28.908688641194765),
                      LatLng(40.9336719221453,28.82711931646076),
                      LatLng(40.932204690138036,28.76108700596177),
                      LatLng(40.935139121567914,28.671749174110175),
                      LatLng(40.94687554387361,28.576584961920464),
                      LatLng(40.97474118811937,28.50861052464208),
                      LatLng(41.00259506691689,28.45034672126064),
                      LatLng(41.02750698422504,28.37266165008534),
                      LatLng(41.034832225794815,28.306629339586355),
                      LatLng(41.043621439847286,28.256134043322426),
                      LatLng(41.042156652342825,28.18621747926468),
                      LatLng(41.03043717865368,28.13766430978015),
                      LatLng(41.00699197216156,28.071631999281156),
                      LatLng(40.98940259103825,28.025020956575982),
                      LatLng(40.96007652607335,27.999773308444016),
                      LatLng(40.94394163381306,27.953162265738843),
                      LatLng(40.94834245002384,27.850229546431585),
                      LatLng(40.979139951214115,27.797792123388295),
                      LatLng(40.97767372944086,27.720107052213002),
                      LatLng(40.4255449936054,26.960735481474885),
                      LatLng(40.45510734577496,27.067552454340902),
                      LatLng(40.47727057816596,27.108337116707922),
                      LatLng(40.496472796788204,27.26953363939671),
                      LatLng(40.48908797825094,27.320028935660634),
                      LatLng(40.44032779467087,27.358871471248257),
                      LatLng(40.388573774132496,27.362755724807013),
                      LatLng(40.3678610211486,27.432672288864758),
                      LatLng(40.35454231756406,27.53172075461326),
                      LatLng(40.35010216498342,27.601637318671006),
                      LatLng(40.363421745654044,27.702627911198867),
                      LatLng(40.50555386560109,27.668276799541616),
                      LatLng(40.57863107354427,27.645611445555325),
                      LatLng(40.57132943918461,27.5893065139147),
                      LatLng(40.57132943918461,27.554974238524075),
                      LatLng(40.58384603879382,27.521328608641262),
                      LatLng(40.60574445299913,27.513775508055325),
                      LatLng(40.6297202005453,27.5124022170397),
                      LatLng(40.65577103565057,27.516522090086575),
                      LatLng(40.66879264025329,27.547421137938137),
                      LatLng(40.675042107483314,27.594113032469387),
                      LatLng(40.65004072430123,27.767147700438137),
                      LatLng(40.63336792952695,27.772640864500637),
                      LatLng(40.61929701975187,27.741055171141262),
                      LatLng(40.57873289526049,27.64940792881405),
                      LatLng(40.52499517753618,27.663827484478112),
                      LatLng(40.551608563824914,27.76407772861874),
                      LatLng(40.55257085480471,27.7667180949185),
                      LatLng(40.54371638822772,27.842461039314397),
                      LatLng(40.53486075099446,27.92985674438655),
                      LatLng(40.5141930452173,28.054152858267024),
                      LatLng(40.49351896690078,28.091053267075292),
                      LatLng(40.43293680036647,28.065805618943326),
                      LatLng(40.40336469891974,27.974525660312374),
                      LatLng(40.41815237442139,28.075516252840238),
                      LatLng(40.43441506422505,28.170680465029182),
                      LatLng(40.426260638636705,28.462474724120945),
                      LatLng(40.428351417463375,28.765972038574073),
                      LatLng(40.411623367058056,28.94037999755845),
                      LatLng(40.410577725802575,29.04063024169907),
                      LatLng(40.437759117861,29.0365103686522),
                      LatLng(40.45275366076545,28.922198902565288),
                      LatLng(40.473650285943854,28.845294605690288),
                      LatLng(40.496629064803805,28.754657398659038),
                      LatLng(40.53630115167753,28.727191578346538),
                      LatLng(40.58846549657489,28.771136890846538),
                      LatLng(40.630167699510935,28.856280933815288),
                      LatLng(40.661427271961735,28.952411304909038),
                      LatLng(40.69267220190507,29.034808765846538),
                      LatLng(40.69683708611069,29.163898121315288),
                      LatLng(40.70933017654362,29.257281910377788),
                      LatLng(40.74055264993188,29.303973804909038)
                    ],
                    color: getDensityColor(planktonDensity),
                    borderColor: getDensityColor(planktonDensity),
                    borderStrokeWidth: 2,
                  ),
                ],
              ),
              // Hazar Denizi
              PolygonLayer(
                polygons: [
                  Polygon(
                    points: [
                      LatLng(37.10733773740009,53.69626527751402),
                      LatLng(36.87919198737542,52.268042621264016),
                      LatLng(36.826445829368936,51.586890277514016),
                      LatLng(37.037211950638664,50.905737933764016),
                      LatLng(37.26488351236214,50.510230121264016),
                      LatLng(37.57898785527404,50.290503558764016),
                      LatLng(37.66600505071517,49.829077777514016),
                      LatLng(37.70078340219237,49.433569965014016),
                      LatLng(38.168692863189726,49.103980121264016),
                      LatLng(38.78792768607982,49.082007465014016),
                      LatLng(38.89061575975806,49.521460590014016),
                      LatLng(39.248855891082215,49.631323871264016),
                      LatLng(39.58834433785635,49.916968402514016),
                      LatLng(39.87560819773791,49.873023090014016),
                      LatLng(40.06084647233635,49.894995746264016),
                      LatLng(40.094472215718724,50.949683246264016),
                      LatLng(40.32938725549498,51.213355121264016),
                      LatLng(40.53009450482857,50.795874652514016),
                      LatLng(40.79677176940359,50.180640277514016),
                      LatLng(40.846655015252196,49.697241840014016),
                      LatLng(41.96726079430678,48.796362933764016),
                      LatLng(43.100591631966125,47.829566058764016),
                      LatLng(43.659536420869294,47.873511371264016),
                      LatLng(44.05562660844929,48.181128558764016),
                      LatLng(44.260553498179355,47.631812152514016),
                      LatLng(44.590085586305214,47.829566058764016),
                      LatLng(44.68389639323368,47.434058246264016),
                      LatLng(44.66827179095538,47.148413715014016),
                      LatLng(45.19714471503703,47.653784808764016),
                      LatLng(45.42892268564455,48.334937152514016),
                      LatLng(45.45975479645862,48.884253558764016),
                      LatLng(45.87433918080174,49.411597308764016),
                      LatLng(46.1185700809369,50.004859027514016),
                      LatLng(46.54338105131789,50.202612933764016),
                      LatLng(46.799692639065945,51.059546527514016),
                      LatLng(46.829767037805354,51.345191058764016),
                      LatLng(46.603799021874266,51.674780902514016),
                      LatLng(46.664149686799426,52.553687152514016),
                      LatLng(46.4071944913949,52.751441058764016),
                      LatLng(45.76714917512198,52.575659808764016),
                      LatLng(45.59829077291175,52.070288715014016),
                      LatLng(45.59829077291175,51.564917621264016),
                      LatLng(45.32087759508375,51.037573871264016),
                      LatLng(45.15067536931193,50.642066058764016),
                      LatLng(45.15067536931193,49.960913715014016),
                      LatLng(44.80874154343234,49.829077777514016),
                      LatLng(44.22907261066158,50.180640277514016),
                      LatLng(43.944986586323665,50.598120746264016),
                      LatLng(43.13267012323149,51.081519183764016),
                      LatLng(42.795007461659075,51.674780902514016),
                      LatLng(42.69714289041548,51.86505326147205),
                      LatLng(42.6000063587384,52.393311745463926),
                      LatLng(42.071696108479884,52.26901563158349),
                      LatLng(41.730554251874615,52.23794160311338),
                      LatLng(41.3759333171113,52.33116368852374),
                      LatLng(41.22419235613438,52.54868188781451),
                      LatLng(41.346779783868165,52.87495918675066),
                      LatLng(41.42255180261412,53.038097836218746),
                      LatLng(41.6609464951527,53.014792314866185),
                      LatLng(41.742148220087785,52.98371828639606),
                      LatLng(41.95625900802014,53.19346797856933),
                      LatLng(42.071696108479884,53.566356320210666),
                      LatLng(42.077462463262925,53.791643026618964),
                      LatLng(41.863758503437474,53.791643026618964),
                      LatLng(41.60869124565772,53.86155959067674),
                      LatLng(41.42255180261412,53.939244661851994),
                      LatLng(41.17158439839049,54.52188269566659),
                      LatLng(40.913781537465134,54.51411418854909),
                      LatLng(40.95486317081504,54.34320703196347),
                      LatLng(40.849173078180264,54.1256888326727),
                      LatLng(40.77861920712489,53.939244661851994),
                      LatLng(40.784501561943905,53.76056899814888),
                      LatLng(40.90791064736952,53.75280049103132),
                      LatLng(40.902039235987054,53.52751378462304),
                      LatLng(40.80802577147092,53.27892155686214),
                      LatLng(40.82566345793736,53.12355141451155),
                      LatLng(41.10137469025729,53.09247738604143),
                      LatLng(41.29427051560938,52.975949779278515),
                      LatLng(41.416726320709046,53.05363485045382),
                      LatLng(41.1540390167756,53.08470887892393),
                      LatLng(41.04866809946767,52.603061437637194),
                      LatLng(40.45246331233072,52.5384763339898),
                      LatLng(39.8900123334455,52.7252439121148),
                      LatLng(39.45875811574363,52.9010251621148),
                      LatLng(38.973586949853626,52.7362302402398),
                      LatLng(38.64827949690267,52.9449704746148),
                      LatLng(38.79399541385815,53.2635739902398),
                      LatLng(38.973586949853626,53.3404782871148),
                      LatLng(38.84535359917691,53.5711911777398),
                      LatLng(38.07109925869601,53.5821775058648),
                      LatLng(37.40210484104114,53.6700681308648)
                    ],
                    color: getDensityColor(planktonDensity),
                    borderColor: getDensityColor(planktonDensity),
                    borderStrokeWidth: 2,
                  ),
                ],
              ),
              // Akdeniz
              PolygonLayer(
                polygons: [
                  Polygon(
                    points: [
                      LatLng(31.469260717509883,34.05345239944202),
                      LatLng(31.73126542034445,34.32811060256702),
                      LatLng(32.01116483774453,34.45994654006702),
                      LatLng(32.53136058532251,34.61375513381702),
                      LatLng(32.974859742359925,34.77855005569202),
                      LatLng(33.379454241167075,34.98729029006702),
                      LatLng(33.919035995028416,35.22898950881702),
                      LatLng(34.273846187864905,35.41575708694202),
                      LatLng(34.61812453926052,35.56956568069202),
                      LatLng(35.03297916268711,35.65745630569202),
                      LatLng(35.26653610720099,35.61351099319202),
                      LatLng(35.472584633457004,35.525620368192016),
                      LatLng(35.811858137159696,35.49266138381702),
                      LatLng(35.998732512052406,35.61351099319202),
                      LatLng(36.14968825228845,35.61351099319202),
                      LatLng(36.362308436244646,35.29490747756702),
                      LatLng(36.54787591159413,34.81150904006702),
                      LatLng(36.20289753699841,34.26219263381702),
                      LatLng(35.856392055121496,34.284165290067016),
                      LatLng(35.909799752103396,34.62474146194202),
                      LatLng(35.75838445029381,34.85545435256702),
                      LatLng(35.24859399772421,34.31712427444202),
                      LatLng(34.89793016149251,34.26219263381702),
                      LatLng(34.78070777517445,34.19627466506702),
                      LatLng(34.78070777517445,33.92161646194202),
                      LatLng(34.95197647272153,33.998520758817016),
                      LatLng(34.9159495537449,33.81175318069202),
                      LatLng(34.76265875065408,33.80076685256702),
                      LatLng(34.636205113996134,33.679917243192016),
                      LatLng(34.55481150987213,33.28440943069202),
                      LatLng(34.518610983978064,32.98777857131702),
                      LatLng(34.482394720706765,32.71312036819202),
                      LatLng(34.58195157206214,32.24070825881702),
                      LatLng(34.77168375635264,32.07591333694202),
                      LatLng(35.104914223227965,31.988022711942016),
                      LatLng(35.23962145362885,32.163803961942016),
                      LatLng(35.37410531398732,32.50438013381702),
                      LatLng(35.44573857825062,32.70213404006702),
                      LatLng(35.57987922254614,32.746079352567016),
                      LatLng(35.615612194886175,33.16355982131702),
                      LatLng(35.615612194886175,33.73484888381702),
                      LatLng(35.865295838811555,34.284165290067016),
                      LatLng(36.176297411440906,34.24021997756702),
                      LatLng(35.84748727132719,32.72410669631702),
                      LatLng(35.99873251205276,32.26268091506702),
                      LatLng(36.309207650119426,31.90013208694202),
                      LatLng(36.56552583914157,31.26292505569202),
                      LatLng(36.61845142729179,30.84544458694202),
                      LatLng(35.98095397069723,30.625718024442016),
                      LatLng(35.98984374219166,30.04344263381702),
                      LatLng(35.99873251205276,29.63694849319202),
                      LatLng(36.309207650119426,29.13157739944202),
                      LatLng(36.55670137931018,28.82396021194202),
                      LatLng(36.67134070796047,28.450425055692016),
                      LatLng(36.54787591159449,28.25267114944202),
                      LatLng(36.19403183237701,28.28563013381702),
                      LatLng(36.025392810826105,28.175766852567016),
                      LatLng(35.82076692034412,27.81321802444202),
                      LatLng(35.454688258727636,27.32981958694202),
                      LatLng(35.28447424432645,26.84642114944202),
                      LatLng(34.84384826465858,26.165268805692016),
                      LatLng(34.816793979379206,25.67088404006702),
                      LatLng(34.852864384303516,25.088608649442016),
                      LatLng(34.888918982575746,24.495346930692016),
                      LatLng(35.06895461810477,24.187729743192016),
                      LatLng(35.14085797088554,23.64939966506702),
                      LatLng(35.32033859800858,23.37474146194202),
                      LatLng(35.579879222547056,23.418686774442016),
                      LatLng(35.82076692034468,23.231919196317016),
                      LatLng(36.069806600038476,22.957260993192016),
                      LatLng(36.23835031421316,22.770493415067016),
                      LatLng(36.20289753699932,22.342026618192016),
                      LatLng(36.39768884592279,22.177231696317016),
                      LatLng(36.54787591159568,22.045395758817016),
                      LatLng(36.52139346208628,21.704819586942016),
                      LatLng(36.72419366102012,21.36424341506702),
                      LatLng(36.996687777459435,21.298325446317016),
                      LatLng(37.329128062801736,21.318413146662134),
                      LatLng(37.46877313828222,21.307426818537134),
                      LatLng(37.51235884207238,20.944877990412134),
                      LatLng(37.60815783342931,20.494438537287134),
                      LatLng(38.02474629221859,20.252739318537134),
                      LatLng(38.33564250782815,20.054985412287134),
                      LatLng(38.94490262529541,20.428520568537134),
                      LatLng(39.004689766504015,20.098930724787134),
                      LatLng(39.362351644824514,19.615532287287134),
                      LatLng(39.79420527144363,19.187065490412134),
                      LatLng(40.332326114905804,19.121147521662134),
                      LatLng(41.60149522150929,19.143120177912134),
                      LatLng(42.19028839917667,18.538872131037134),
                      LatLng(42.531242372715234,17.330376037287134),
                      LatLng(42.822015376580865,15.770317443537133),
                      LatLng(43.23961759547016,15.825249084162133),
                      LatLng(44.07418524254034,14.517876037287133),
                      LatLng(44.61629677018107,13.693901427912133),
                      LatLng(45.39306615457731,13.177544006037133),
                      LatLng(44.9204897117541,12.771049865412133),
                      LatLng(44.365506118562024,12.639213927912133),
                      LatLng(44.08996916713106,13.089653381037133),
                      LatLng(43.75762254831092,13.693901427912133),
                      LatLng(43.34357407624898,14.045463927912133),
                      LatLng(42.94276913394197,14.166313537287133),
                      LatLng(42.57170886634379,14.397026427912133),
                      LatLng(42.385345794801864,14.836479552912133),
                      LatLng(42.239109368521106,15.056206115412133),
                      LatLng(42.41779663173815,15.737358459162133),
                      LatLng(42.36099665337614,15.957085021662136),
                      LatLng(42.16586376288375,16.099907287287134),
                      LatLng(41.921098700034925,16.429497131037134),
                      LatLng(41.50283554914618,16.517387756037134),
                      LatLng(41.3380682460232,17.022758849787134),
                      LatLng(41.11496957993192,17.451225646662134),
                      LatLng(40.86618990985621,18.165336974787134),
                      LatLng(40.1478265715771,18.681694396662134),
                      LatLng(39.70974022209519,18.692680724787134),
                      LatLng(39.42178492761424,18.033501037287134),
                      LatLng(39.23482419711215,17.440239318537134),
                      LatLng(38.867959296971975,17.341362365412134),
                      LatLng(38.28391862226589,16.890922912287134),
                      LatLng(37.868801159407774,16.352592834162134),
                      LatLng(37.73859420635638,16.088920959162134),
                      LatLng(37.70383359456636,15.803276427912136),
                      LatLng(37.71032187956209,15.540385598977798),
                      LatLng(37.05764363550786,15.540385598977798),
                      LatLng(36.57541165879222,15.357848271577149),
                      LatLng(36.458049964795045,14.791982556635032),
                      LatLng(36.838823943147666,14.098340712512437),
                      LatLng(37.11588933666279,13.276922739209406),
                      LatLng(37.319396539186535,12.674549558787175),
                      LatLng(37.96979953437924,11.798370387263894),
                      LatLng(38.314347819480645,12.747564489747441),
                      LatLng(38.428835383763385,13.495967532090207),
                      LatLng(38.3000241404492,13.934057117851848),
                      LatLng(38.371614243402455,14.591191496494288),
                      LatLng(38.57168998032331,15.357848271577149),
                      LatLng(39.40875151332121,15.649907995419055),
                      LatLng(39.970606719236756,15.011027349516672),
                      LatLng(40.58335618613085,13.149146610029769),
                      LatLng(41.50571705083926,11.944400249185266),
                      LatLng(41.914518485599906,11.04996734492197),
                      LatLng(42.23968657657802,9.662683656676819),
                      LatLng(41.38256990881712,9.553161260236399),
                      LatLng(40.92903239565412,9.93648964777783),
                      LatLng(39.8165524946835,10.009504578738097),
                      LatLng(39.111949423511064,9.881728449557619),
                      LatLng(38.70001675054477,8.969041812554226),
                      LatLng(38.78544024941893,8.184131304731306),
                      LatLng(39.64809864025506,8.074608908290886),
                      LatLng(40.56949176388017,8.019847710070717),
                      LatLng(41.259189118034584,7.855564115410087),
                      LatLng(41.286627256828595,8.749997019673424),
                      LatLng(42.10440235916226,8.22063877021146),
                      LatLng(42.75112600950122,8.512698494052527),
                      LatLng(43.13861928576238,9.279355269135388),
                      LatLng(42.9117638689726,9.735698587637087),
                      LatLng(42.26670869369221,9.753952320377143),
                      LatLng(42.03665175941564,11.141236008622291),
                      LatLng(42.57663062152693,10.392832966279528),
                      LatLng(42.77792797849618,9.99125084599804),
                      LatLng(43.80097952308756,9.7722060531172),
                      LatLng(44.142537086653206,8.914280614334734),
                      LatLng(43.80097952308794,8.184131304732027),
                      LatLng(43.510435328631935,7.380967064169012),
                      LatLng(43.01862378742121,6.906370012927257),
                      LatLng(42.84488216726651,6.28574309976497),
                      LatLng(43.07198413156128,5.0079818079602),
                      LatLng(43.29824767519285,4.369101162057857),
                      LatLng(43.324811774486,3.9127578435561587),
                      LatLng(42.85826430698061,3.438160792314365),
                      LatLng(42.11794380106807,3.4929219905345747),
                      LatLng(41.64227302384389,3.4016533268342513),
                      LatLng(40.94282204593107,1.5215188546072513),
                      LatLng(39.91462706589319,0.3350262265038451),
                      LatLng(39.26757391216527,0.042966502662777906),
                      LatLng(38.771210096687064,0.462802355684322),
                      LatLng(38.82811366902049,0.9191456741854999),
                      LatLng(39.281704500558995,1.2477128635067203),
                      LatLng(39.3099571271366,1.6127875183080944),
                      LatLng(39.21102306455961,1.8865935094091049),
                      LatLng(39.40875151332365,2.196906965990269),
                      LatLng(39.605920873841654,1.9778621731094683),
                      LatLng(39.90062499689388,2.397698026131012),
                      LatLng(40.12431452005047,2.8722950773727662),
                      LatLng(40.18012231185127,3.3103846631344074),
                      LatLng(40.02654056438293,3.5841906542354183),
                      LatLng(40.20800900879745,3.784981714376162),
                      LatLng(40.24981755020301,4.1135489036973825),
                      LatLng(40.16617466328326,4.442116093018603),
                      LatLng(39.872612273851594,4.588145954939137),
                      LatLng(39.6199829859858,4.40560862753849),
                      LatLng(39.605920873841654,3.8762503780764854),
                      LatLng(39.394646584860844,3.4199070595748275),
                      LatLng(39.01273630372531,3.1278473357337204),
                      LatLng(38.9985516207766,2.927056275592977),
                      LatLng(39.33819835154866,2.288175629690592),
                      LatLng(39.38053880417285,2.2334144314703823),
                      LatLng(39.1827305483486,1.8318323111888948),
                      LatLng(38.756977104707055,1.8318323111888948),
                      LatLng(38.471721508928276,1.7770711129687247),
                      LatLng(38.45742896597284,1.5945337855680377),
                      LatLng(38.52886335211837,1.1929516652865502),
                      LatLng(38.78544024942135,0.9373994069255966),
                      LatLng(38.68576956701812,0.4810560884238991),
                      LatLng(38.24270114221991,-0.030048428297568822),
                      LatLng(37.73919779434289,-0.4681380140592096),
                      LatLng(37.40644574495128,-0.5776604104996098),
                      LatLng(37.30487852255579,-1.1617798581817842),
                      LatLng(36.926427242116,-1.6728843749036717),
                      LatLng(36.560751182590664,-2.019705296964969),
                      LatLng(36.458049964798455,-2.841123270268021),
                      LatLng(36.47272990905125,-3.6260337780909384),
                      LatLng(36.47272990905125,-4.337929354953589),
                      LatLng(36.17860344015807,-4.94030253537582),
                      LatLng(35.88336860520843,-5.068078664556298),
                      LatLng(35.48304999193323,-4.721257742495),
                      LatLng(35.453316930578026,-3.8998397691919484),
                      LatLng(35.48304999193323,-3.2609591232895845),
                      LatLng(35.61671264924647,-3.1331829941091076),
                      LatLng(35.4235728782424,-2.5673172791670096),
                      LatLng(35.4235728782424,-2.1109739606653126),
                      LatLng(35.453316930578026,-1.7641530386040152),
                      LatLng(35.89815661419174,-1.3260634528423942),
                      LatLng(36.104898498775526,-0.322108152138656),
                      LatLng(36.51675306099943,0.4810560884243387),
                      LatLng(36.83882394315108,1.8135785784492777),
                      LatLng(37.02850400326951,3.01832493929374),
                      LatLng(37.14499539913018,4.168310101918032),
                      LatLng(37.05764363551147,5.391310195501951),
                      LatLng(37.2467784255483,6.267489367025234),
                      LatLng(37.290357702482886,6.8151013492272545),
                      LatLng(37.304878522556024,7.581758124310115),
                      LatLng(37.23224639564207,8.38492236487309),
                      LatLng(37.290357702482886,8.841265683374786),
                      LatLng(37.507875465795316,9.388877665576807),
                      LatLng(37.507875465795316,10.15553444065967),
                      LatLng(37.304878522556024,11.122982275883274),
                      LatLng(36.95560600217578,11.37853453424423),
                      LatLng(36.3405103890406,10.995206146702799),
                      LatLng(36.134388784519956,10.776161353821955),
                      LatLng(35.88336860520868,11.195997206843542),
                      LatLng(35.2001425497243,11.506310663423745),
                      LatLng(34.73643543166415,11.871385318225121),
                      LatLng(34.23993659812202,11.159489741362469),
                      LatLng(33.77208151480145,11.281420419625997),
                      LatLng(33.29288856251614,11.887363974793162),
                      LatLng(33.05880959397854,12.648677672310914),
                      LatLng(33.084849229096996,13.425528384063725),
                      LatLng(32.96761021516778,14.03147193923089),
                      LatLng(32.73266506235389,14.886007722158954),
                      LatLng(32.208345150049894,15.569636348501414),
                      LatLng(31.654537916729844,15.880376633202545),
                      LatLng(31.535431899993313,16.408635117194457),
                      LatLng(31.36312138124666,16.999041658126565),
                      LatLng(31.163908411034,17.68267028446906),
                      LatLng(30.884305386481223,18.59935412433736),
                      LatLng(30.5637570885385,19.03439052291892),
                      LatLng(30.790922278507562,19.857852277376868),
                      LatLng(31.535431899993313,19.857852277376868),
                      LatLng(32.23463356784794,19.640334078086084),
                      LatLng(32.824106530384256,20.494869861014188),
                      LatLng(32.85177892252981,20.680395952146938),
                      LatLng(33.08668988720432,21.370607046114127),
                      LatLng(33.12573406870177,22.038698658221527),
                      LatLng(33.00854950403853,22.846623398444457),
                      LatLng(32.734513057136915,23.34380785396621),
                      LatLng(32.40717754865978,23.639011124432287),
                      LatLng(32.17075786757298,24.555694964300585),
                      LatLng(32.065484826860065,25.115027476762613),
                      LatLng(31.841377091115515,25.534526861109118),
                      LatLng(31.36499724009704,28.113671224128407),
                      LatLng(31.325189094853116,29.37216937716795),
                      LatLng(31.669632266688453,30.335464259741425),
                      LatLng(31.78856647436295,31.469666298900506),
                      LatLng(31.6034917946736,32.339739096063624),
                      LatLng(31.404788533128322,32.930145636995775),
                      LatLng(31.391526641997213,33.72253336298364),
                      LatLng(31.48432051439198,34.01773663344967)
                    ],
                    color: getDensityColor(planktonDensity),
                    borderColor: getDensityColor(planktonDensity),
                    borderStrokeWidth: 2,
                  ),
                ],
              ),
              // Ege Denizi
              PolygonLayer(
                polygons: [
                  Polygon(
                    points: [
                      LatLng(35.7217497041422,23.409254992090926),
                      LatLng(35.775248017569716,23.782790148340926),
                      LatLng(35.56997601002624,24.409010851465926),
                      LatLng(35.507397202907654,25.254958117090926),
                      LatLng(35.45371937983862,25.881178820215926),
                      LatLng(35.46266817271129,26.14485069521593),
                      LatLng(35.35521698819829,26.419508898340926),
                      LatLng(35.00501292151502,26.375563585840926),
                      LatLng(35.238649991830584,26.771071398340926),
                      LatLng(35.46266817271129,26.716139757715926),
                      LatLng(35.6057134022164,26.968825304590926),
                      LatLng(35.97376282896399,27.217450036423497),
                      LatLng(35.982653410546234,27.327313317673497),
                      LatLng(35.679812434673956,27.327313317673497),
                      LatLng(35.52795903851445,27.316326989548497),
                      LatLng(35.80465161941924,27.810711755173497),
                      LatLng(36.10701634391671,27.601971520798497),
                      LatLng(36.38169145818116,27.305340661423497),
                      LatLng(36.49659024866154,27.140545739548497),
                      LatLng(36.41706304990157,26.909832848923497),
                      LatLng(36.69945559711944,26.920819177048497),
                      LatLng(36.94570129334573,26.8109558957985),
                      LatLng(37.11234487579173,26.624188317673497),
                      LatLng(37.33105515778207,26.404461755173497),
                      LatLng(37.48813353030554,26.239666833298497),
                      LatLng(37.47941559658627,25.932049645798497),
                      LatLng(37.618780414068844,25.910076989548497),
                      LatLng(37.749198128518124,26.338543786423497),
                      LatLng(37.862041231070364,26.723065270798497),
                      LatLng(37.8793864011124,27.1185730832985),
                      LatLng(37.96605098292094,27.063641442673497),
                      LatLng(38.02665540304086,26.723065270798497),
                      LatLng(38.10450176611739,26.437420739548497),
                      LatLng(38.13907355666276,26.129803552048497),
                      LatLng(38.06126401244359,25.965008630173497),
                      LatLng(38.242690678205996,25.800213708298497),
                      LatLng(38.44948236824316,25.800213708298497),
                      LatLng(38.61277343241225,25.745282067673497),
                      LatLng(38.68999242987925,25.910076989548497),
                      LatLng(38.629940402021305,26.074871911423497),
                      LatLng(38.749994092921646,26.448407067673497),
                      LatLng(38.77569366773371,26.536297692673497),
                      LatLng(38.8783993803546,26.690106286423497),
                      LatLng(38.980956867463526,26.690106286423497),
                      LatLng(38.92969665928381,26.338543786423497),
                      LatLng(39.0151097376999,26.008953942673497),
                      LatLng(39.194141730631365,25.7342957395485),
                      LatLng(39.44911229602617,26.019940270798497),
                      LatLng(39.652419063681855,25.975994958298497),
                      LatLng(39.829823475431965,25.997967614548497),
                      LatLng(39.9731019048784,25.943035973923497),
                      LatLng(40.065651776262946,25.997967614548497),
                      LatLng(40.107678395269694,25.624432458298497),
                      LatLng(40.27552531152572,25.690350427048497),
                      LatLng(40.300666513101994,26.0419129270485),
                      LatLng(40.309044835371694,26.0419129270485),
                      LatLng(40.45131727391954,26.239666833298497),
                      LatLng(40.55991104750741,26.382489098923497),
                      LatLng(40.63498833178655,25.910076989548497),
                      LatLng(40.793207848066956,25.811200036423497),
                      LatLng(40.8597140774881,25.338787927048497),
                      LatLng(40.85140444646655,25.042157067673497),
                      LatLng(40.65999535513297,24.899334802048497),
                      LatLng(40.551563923025945,24.811444177048497),
                      LatLng(40.51816501929555,24.547772302048497),
                      LatLng(40.62665057507986,24.371991052048497),
                      LatLng(40.818155500062545,24.547772302048497),
                      LatLng(40.67666149792224,24.119305505173497),
                      LatLng(40.65166072185954,23.822674645798497),
                      LatLng(40.48474946856871,24.097332848923497),
                      LatLng(40.292287151670855,24.382977380173497),
                      LatLng(40.14128100716831,24.492840661423497),
                      LatLng(40.099275147216154,24.174237145798497),
                      LatLng(39.93099229215503,24.042401208298497),
                      LatLng(39.87199528795461,23.624920739548497),
                      LatLng(39.9731019048784,23.108563317673497),
                      LatLng(40.241989163519996,23.097576989548497),
                      LatLng(40.292287151670855,22.757000817673497),
                      LatLng(40.04042335185158,22.746014489548497),
                      LatLng(39.601648230462004,23.108563317673497),
                      LatLng(39.33873916630405,23.427166833298497),
                      LatLng(39.27923517647013,23.646893395798497),
                      LatLng(39.533895847660304,24.086346520798497),
                      LatLng(39.474558216935144,24.361004723923497),
                      LatLng(39.30474308185226,24.437909020798497),
                      LatLng(39.22819149341141,24.152264489548497),
                      LatLng(39.05777764102861,24.207196130173497),
                      LatLng(38.99803536311936,24.009442223923497),
                      LatLng(39.01510973769993,23.679852380173497),
                      LatLng(39.040713571414315,23.515057458298497),
                      LatLng(38.86129205190853,23.756756677048497),
                      LatLng(38.749994092921646,24.141278161423497),
                      LatLng(38.86984623077072,24.262127770798497),
                      LatLng(39.14303613540029,24.437909020798497),
                      LatLng(38.92114968676756,24.734539880173497),
                      LatLng(38.75856164628333,24.789471520798497),
                      LatLng(38.65568315099161,24.679608239548497),
                      LatLng(38.71571359682249,24.361004723923497),
                      LatLng(38.37200467801715,24.350018395798497),
                      LatLng(38.23406154904897,24.569744958298497),
                      LatLng(38.01800069487429,24.833416833298497),
                      LatLng(37.836015820396376,25.086102380173497),
                      LatLng(37.64488229930136,25.426678552048497),
                      LatLng(37.45325569247549,25.668377770798497),
                      LatLng(37.304843418489,25.932049645798497),
                      LatLng(37.0159115731358,25.778241052048497),
                      LatLng(36.98959031071146,26.107830895798497),
                      LatLng(37.12986502980379,26.393475427048497),
                      LatLng(37.05976008948292,26.536297692673497),
                      LatLng(36.901786977343775,26.580243005173497),
                      LatLng(36.82267749185041,26.162762536423497),
                      LatLng(36.69945559712134,25.811200036423497),
                      LatLng(36.54073677679962,25.679364098923497),
                      LatLng(36.514251882302034,25.393719567673497),
                      LatLng(36.58485811209981,25.163006677048497),
                      LatLng(36.55838833472074,24.789471520798497),
                      LatLng(36.70826372510248,24.712567223923497),
                      LatLng(36.549563059664194,24.350018395798497),
                      LatLng(36.53190948622138,24.130291833298497),
                      LatLng(36.7170708435947,24.086346520798497),
                      LatLng(36.866637317063855,24.141278161423497),
                      LatLng(36.9281386021555,24.525799645798497),
                      LatLng(37.09482066726883,24.426922692673497),
                      LatLng(37.1999050867289,24.240155114548497),
                      LatLng(37.479415596588154,24.196209802048497),
                      LatLng(37.575256902463764,24.053387536423497),
                      LatLng(37.40090842847297,23.943524255173497),
                      LatLng(37.479415596588154,23.811688317673497),
                      LatLng(37.67967054969829,23.811688317673497),
                      LatLng(37.67097501554758,23.635907067673497),
                      LatLng(37.322318927024185,23.690838708298497),
                      LatLng(37.16489317148311,23.427166833298497),
                      LatLng(37.17364767173999,23.119549645798497),
                      LatLng(36.761091290493155,23.152508630173497),
                      LatLng(36.43474280786203,23.262371911423497),
                      LatLng(36.355152201094405,23.141522302048497),
                      LatLng(36.09813979322216,23.218426598923497),
                      LatLng(35.96487124593337,23.350262536423497),
                      LatLng(35.74225649714511,23.438153161423497)
                    ],
                    color: getDensityColor(planktonDensity),
                    borderColor: getDensityColor(planktonDensity),
                    borderStrokeWidth: 2,
                  ),
                ],
              ),


              // sağ sınır
              PolygonLayer(
                polygons: [
                  Polygon(
                    points: [
                      LatLng(90,180.0),
                      LatLng(-90,180.0)

                    ],
                    color: Colors.red,
                    borderColor: Colors.red,
                    borderStrokeWidth: 2,
                  ),
                ],
              ),
              // sol sınır
              PolygonLayer(
                polygons: [
                  Polygon(
                    points: [
                      LatLng(90,-180.0),
                      LatLng(-90,-180.0)

                    ],
                    color: Colors.red,
                    borderColor: Colors.red,
                    borderStrokeWidth: 2,
                  ),
                ],
              ),
            ],
          ),

          DraggableScrollableSheet(
            initialChildSize: 0.3,
            minChildSize: 0.3,
            maxChildSize: 0.6,
            builder: (BuildContext context, ScrollController scrollController) {
              return Container(
                color: darktema ? Colors.black26 : Colors.white38,
                child: ListView(
                  controller: scrollController,
                  padding: EdgeInsets.all(16.0),
                  children: [
                    buildParameterControl('Nitrat', nitrate, (value) {
                      setState(() {
                        nitrate = value;
                        updatePlanktonDensity();
                      });
                    }),
                    buildParameterControl('Demir', iron, (value) {
                      setState(() {
                        iron = value;
                        updatePlanktonDensity();
                      });
                    }),
                    buildParameterControl('pH', ph, (value) {
                      setState(() {
                        ph = value;
                        updatePlanktonDensity();
                      });
                    }, min: 6.5, max: 8.5),
                    buildParameterControl('CO2', co2, (value) {
                      setState(() {
                        co2 = value;
                        updatePlanktonDensity();
                      });
                    }, min: 300, max: 500),
                    buildParameterControl('Tuzluluk', salinity, (value) {
                      setState(() {
                        salinity = value;
                        updatePlanktonDensity();
                      });
                    }, min: 30, max: 40),
                    buildParameterControl('Sıcaklık', temperature, (value) {
                      setState(() {
                        temperature = value;
                        updatePlanktonDensity();
                      });
                    }, min: -20, max: 40),
                    SizedBox(height: 20),
                    Text(
                        'Plankton Yoğunluğu: ${planktonDensity.toStringAsFixed(1)}%',
                        style: TextStyle(
                            fontSize: 18, fontWeight: FontWeight.bold)),
                    Text(
                        'Atmosferik CO2 Seviyesi: ${atmosphericCO2.toStringAsFixed(1)} ppm',
                        style: TextStyle(
                            fontSize: 18, fontWeight: FontWeight.bold)),
                  ],
                ),
              );
            },
          ),
        ],
      ),
    );
  }

  Widget buildParameterControl(
      String name, double value, Function(double) onChanged,
      {double min = 0, double max = 100}) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text('$name: ${value.toStringAsFixed(1)}',
            style: TextStyle(fontSize: 16, fontWeight: FontWeight.bold)),
        Slider(
          value: value,
          onChanged: onChanged,
          min: min,
          max: max,
          divisions: 100,
          label: value.toStringAsFixed(1),
        ),
      ],
    );
  }
}
